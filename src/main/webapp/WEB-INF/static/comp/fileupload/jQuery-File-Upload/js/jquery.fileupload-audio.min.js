(function(a){if(typeof define==="function"&&define.amd){define(["jquery","load-image","./jquery.fileupload-process"],a)
}else{a(window.jQuery,window.loadImage)
}}(function(a,b){a.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",always:true,prefix:true,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"});
a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(i,e){if(e.disabled){return i
}var h=this,f=i.files[i.index],c=a.Deferred(),d,g;
if(this._audioElement.canPlayType&&this._audioElement.canPlayType(f.type)&&(a.type(e.maxFileSize)!=="number"||f.size<=e.maxFileSize)&&(!e.fileTypes||e.fileTypes.test(f.type))){d=b.createObjectURL(f);
if(d){g=this._audioElement.cloneNode();
g.src=d;g.controls=true;
i.audio=g;c.resolveWith(h,[i]);
return c.promise()
}}c.rejectWith(h,[i]);
return c.promise()
},setAudio:function(d,c){if(d.audio&&!c.disabled){d.files[d.index][c.name||"preview"]=d.audio
}return d}}})
}));