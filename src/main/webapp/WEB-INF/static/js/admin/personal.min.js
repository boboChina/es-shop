$.personal={message:{initBtn:function(){$(".message .accordion-toggle").on("click",function(){var b=$(this);
var c=$(b.attr("href"));
var d=c.attr("id").replace("collapse","");
if(!c.data("loaded")){c.data("loaded",true);
b.append("<img class='loading' src=ctx + '/static/images/loading.gif' style='height:20px'>");
c.find(".accordion-inner").load(ctx+"/admin/personal/message/"+d+"/content",function(){b.find(".loading").remove()
});a(c)}});
function a(b){b.find(".btn-view-store").click(function(){var c=$(this).data("href");
$.app.confirm({title:"收藏消息",message:"确认收藏该消息吗？",ok:function(){location.href=c
}});return false
});b.find(".btn-view-recycle").click(function(){var c=$(this).data("href");
$.app.confirm({title:"移动消息到垃圾箱",message:"确认把该消息移动到垃圾箱吗？",ok:function(){location.href=c
}});return false
});b.find(".btn-view-delete").click(function(){var c=$(this).data("href");
$.app.confirm({title:"删除垃圾箱消息",message:"确认从垃圾箱删除该消息吗？",ok:function(){location.href=c
}});return false
})}a($(document));
$(".btn-store").click(function(){var b=$.table.getAllSelectedCheckbox($(".table"));
if(b.size()==0){return
}$.app.confirm({title:"收藏消息",message:"确认收藏选中的消息吗？",ok:function(){location.href=ctx+"/admin/personal/message/batch/store?"+b.serialize()
}})});$(".btn-recycle-or-delete").click(function(){var f=$.table.getAllSelectedCheckbox($(".table"));
if(f.size()==0){return
}var d=$(this).closest(".panel");
var e=d.data("state");
var b=e!="trash_box";
var c=d.data("state-info");
$.app.confirm({title:b?"移动消息到垃圾箱":"删除垃圾箱消息",message:b?"确认将"+c+"中的消息移动到垃圾箱吗？":"确认删除垃圾箱选中的消息吗？",ok:function(){location.href=ctx+"/admin/personal/message/batch/"+(b?"recycle":"delete")+"?"+f.serialize()
}})});$(".btn-clear").click(function(){var c=$(this).closest(".panel");
var d=c.data("state");
var b=c.data("state-info");
$.app.confirm({title:"清空"+b,message:"确认清空"+b+"吗？",ok:function(){location.href=ctx+"/admin/personal/message/clear/"+d
}})});$(".btn-mark-read").click(function(){var b=$(".table");
var c=$.table.getAllSelectedCheckbox(b);
if(c.size()==0){return
}location.href=ctx+"/admin/personal/message/markRead?"+c.serialize()+"&BackURL="+$.table.encodeTableURL(b)
})}}};